<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ü–î–î –≠–∫–∑–∞–º–µ–Ω</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #eef2f5;
}

.screen {
  max-width: 520px;
  margin: auto;
  padding: 20px;
}

.hidden { display: none; }

h1, h2 {
  text-align: center;
}

.ticket {
  background: white;
  padding: 15px;
  margin: 10px 0;
  border-radius: 10px;
  cursor: pointer;
}

.top {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
}

.question {
  margin: 15px 0;
}

img {
  width: 100%;
  border-radius: 10px;
  margin-bottom: 10px;
}

button {
  width: 100%;
  padding: 12px;
  margin: 6px 0;
  border: none;
  border-radius: 8px;
  font-size: 16px;
}

.correct { background: #4caf50; color: white; }
.wrong { background: #f44336; color: white; }
.next { background: #2196f3; color: white; }
</style>
</head>

<body>

<div class="screen" id="menu">
  <h1>üö¶ –ü–î–î –≠–∫–∑–∞–º–µ–Ω</h1>
  <div class="ticket" onclick="start(0)">–ë–∏–ª–µ—Ç ‚Ññ1</div>
  <div class="ticket" onclick="start(1)">–ë–∏–ª–µ—Ç ‚Ññ2</div>
  <div class="ticket" onclick="start(2)">–ë–∏–ª–µ—Ç ‚Ññ3</div>
</div>

<div class="screen hidden" id="quiz">
  <div class="top">
    <div id="progress"></div>
    <div id="timer"></div>
  </div>
  <div class="question" id="question"></div>
  <img id="image">
  <div id="answers"></div>
  <button class="next hidden" id="nextBtn" onclick="next()">–î–∞–ª–µ–µ</button>
</div>

<div class="screen hidden" id="result"></div>

<script>
const tickets = [
[
 {q:"–ö—Ç–æ –∏–º–µ–µ—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ?",img:"https://i.imgur.com/1Q9Z1Zm.png",a:["–í–æ–¥–∏—Ç–µ–ª—å","–ü–µ—à–µ—Ö–æ–¥","–ù–∏–∫—Ç–æ","–ê–≤—Ç–æ–±—É—Å"],c:1},
 {q:"–†–∞–∑—Ä–µ—à—ë–Ω –ª–∏ –ø–æ–≤–æ—Ä–æ—Ç?",img:"https://i.imgur.com/ykZ9Z6U.png",a:["–î–∞","–ù–µ—Ç","–¢–æ–ª—å–∫–æ –¥–Ω—ë–º","–ü–æ —Å–∏—Ç—É–∞—Ü–∏–∏"],c:0}
],
[
 {q:"–ú–æ–∂–Ω–æ –ª–∏ –æ–±–≥–æ–Ω—è—Ç—å?",img:"https://i.imgur.com/6I2Jm7Q.png",a:["–î–∞","–ù–µ—Ç","–ï—Å–ª–∏ –±—ã—Å—Ç—Ä–æ","–ù–æ—á—å—é"],c:1},
 {q:"–ö—Ç–æ –µ–¥–µ—Ç –ø–µ—Ä–≤—ã–º?",img:"https://i.imgur.com/V9Z7Y0S.png",a:["–°–∏–Ω–∏–π","–ö—Ä–∞—Å–Ω—ã–π","–û–±–∞","–ù–∏–∫—Ç–æ"],c:0}
],
[
 {q:"–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–Ω–∞–∫?",img:"https://i.imgur.com/fJk9y7R.png",a:["–ì–ª–∞–≤–Ω–∞—è –¥–æ—Ä–æ–≥–∞","–£—Å—Ç—É–ø–∏","–°—Ç–æ–ø","–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ"],c:2},
 {q:"–ú–æ–∂–Ω–æ –ª–∏ –µ—Ö–∞—Ç—å?",img:"https://i.imgur.com/K8Qp5QX.png",a:["–î–∞","–ù–µ—Ç","–ü–µ—à–µ—Ö–æ–¥–∞–º","–ú–∞—Ä—à—Ä—É—Ç–∫–µ"],c:1}
]
];

let t, i, score, errors, time, timer;

const menu = document.getElementById("menu");
const quiz = document.getElementById("quiz");
const res = document.getElementById("result");

const qEl = document.getElementById("question");
const imgEl = document.getElementById("image");
const aEl = document.getElementById("answers");
const pEl = document.getElementById("progress");
const timerEl = document.getElementById("timer");
const nextBtn = document.getElementById("nextBtn");

function start(ticket){
  t = tickets[ticket];
  i = score = errors = 0;
  time = 20 * 60;
  menu.classList.add("hidden");
  quiz.classList.remove("hidden");
  load();
  timer = setInterval(tick,1000);
}

function load(){
  nextBtn.classList.add("hidden");
  aEl.innerHTML="";
  pEl.textContent = `–í–æ–ø—Ä–æ—Å ${i+1}/${t.length} | –û—à–∏–±–∫–∏: ${errors}`;
  qEl.textContent = t[i].q;
  imgEl.src = t[i].img;

  t[i].a.forEach((text,idx)=>{
    let b=document.createElement("button");
    b.textContent=text;
    b.onclick=()=>answer(b,idx);
    aEl.appendChild(b);
  });
}

function answer(btn,idx){
  const btns=aEl.querySelectorAll("button");
  btns.forEach(b=>b.disabled=true);

  if(idx===t[i].c){
    btn.classList.add("correct");
    score++;
  } else {
    btn.classList.add("wrong");
    btns[t[i].c].classList.add("correct");
    errors++;
  }
  nextBtn.classList.remove("hidden");
}

function next(){
  i++;
  if(i<t.length && errors<3){
    load();
  } else {
    finish();
  }
}

function finish(){
  clearInterval(timer);
  quiz.classList.add("hidden");
  res.classList.remove("hidden");

  const passed = errors < 3;
  localStorage.setItem("lastResult", passed ? "–°–î–ê–ù" : "–ù–ï –°–î–ê–ù");

  res.innerHTML = `
    <h2>${passed ? "üéâ –≠–ö–ó–ê–ú–ï–ù –°–î–ê–ù" : "‚ùå –≠–ö–ó–ê–ú–ï–ù –ù–ï –°–î–ê–ù"}</h2>
    <p>–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö: ${score}</p>
    <p>–û—à–∏–±–æ–∫: ${errors}</p>
    <button onclick="location.reload()">–í –º–µ–Ω—é</button>
  `;
}

function tick(){
  time--;
  let m=Math.floor(time/60);
  let s=time%60;
  timerEl.textContent=`${m}:${s<10?"0":""}${s}`;
  if(time<=0) finish();
}
</script>

</body>
</html>
